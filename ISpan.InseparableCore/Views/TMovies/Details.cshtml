@model ISpan.InseparableCore.ViewModels.MovieVm

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>TMovies</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FMovieName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieIntroduction)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FMovieIntroduction)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.OnDate)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.OnDate)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.OffDate)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.OffDate)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieLength)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FMovieLength)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieScore)
        </dt>
        <dd class = "col-sm-10" id="Score">
            @Html.DisplayFor(model => model.FMovieScore)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Level)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Level)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Categories)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Categories)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieActors)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FMovieActors)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FMovieDirectors)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FMovieDirectors)
        </dd>
    </dl>
</div>
<div class="form-group">
	<select name="FMemberId" class="" id="FMemberId" asp-items="ViewBag.FMemberId"></select>
</div>
<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
	<div class="btn-group me-2" role="group" aria-label="First group">
		<button type="button" class="btn btn-secondary" value="1">1</button>
		<button type="button" class="btn btn-secondary" value="2">2</button>
		<button type="button" class="btn btn-secondary" value="3">3</button>
		<button type="button" class="btn btn-secondary" value="4">4</button>
		<button type="button" class="btn btn-secondary" value="5">5</button>
	</div>
</div>
<button type="button" id="go">go</button>

<div>
    <a asp-action="Edit" asp-route-id="@Model?.FMovieId">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts{
	<script>
		function Score(memberId, score, movieId) {
			$.ajax({
				method: "post",
				url: "/TMovies/Details",
				data: { memberId, score, movieId},
				success: function (data) {
					let context = JSON.parse(data);
					alert("go")
					$("#Score").html(`${context.FScore},${context.FMemberId},${context.FMoiveId}`);
				},
				error: function (jqXHR, textStatus, errorThrown) {
				},
			})
		}
		$('.btn').click(function () {
			$('.btn-primary').addClass('btn-secondary');
			$('.btn-secondary').removeClass('btn-primary');

			$(this).removeClass('btn-secondary');
			$(this).addClass('btn-primary');
		});
		$("#go").click(function() {
			let score = $('.btn-primary').attr("value");
			let memberId = $("#FMemberId").find(":selected").attr("value")
			alert(score + memberId +@Model.FMovieId)
			Score(memberId, score, movieId)
		})
	</script>

}
